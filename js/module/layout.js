
/**
 * dingo-coder
 * Version: 0.1.2
 * Copyright 2015 - 2015 Forest
 */
 define(function(require,a,b){"use strict";var c,d;return d=function(a,b){return parent.postMessage(JSON.stringify(a),"*")},c=function(){function a(a){this.editor=a,this.container=this.editor.container,this.element=this.editor.element,this.event_bind()}return a.prototype.set_layout=function(){switch(this.container.find(".CodeMirror").removeClass("expansiondown expansionup"),this.container.find("#mode-tabs").removeClass("tabup tabdown"),this.element.layout){case 1:this.container.find("#mode-tabs").removeClass("tabup").addClass("tabdown"),this.container.find(".CodeMirror").removeClass("expansionup").addClass("expansiondown"),this.container.find(".mode-tab").removeClass("active"),this.container.find(".mode-tab").eq(0).trigger("click");break;case 2:this.editor.coder.typelist.length>2?(this.container.find("#mode-tabs #file-dropdown-toggle #file-dropdown").hide(),this.container.find(".CodeMirror").show().addClass("expansionup"),this.container.find("#mode-tabs").addClass("tabup")):(this.element.layout++,this.set_layout());break;case 3:this.container.find("#mode-tabs").hide(),this.container.find(".CodeMirror").hide(),this.container.find("#mode-tabs #file-dropdown-toggle #file-dropdown").hide(),this.outerheight=this.container.find("#code-editor").height(),this.editor.coder.typelist.length>2&&null!==this.editor.ifr.ifr?(this.outerheight=(this.outerheight+35)/2,this.container.find(".CodeMirror").eq(0).show().removeClass("expansionup").css("height",""+this.outerheight),this.container.find(".CodeMirror").eq(1).show().removeClass("expansionup").css("height",""+this.outerheight),this.container.find(".renderer").css({height:"50%"}),this.container.find(".CodeMirror").eq(2).prev().appendTo(this.container.find("#renderer-container")),this.container.find(".CodeMirror").eq(2).show().removeClass("expansionup").css({height:"50%",position:"relative",top:"50%"}).appendTo(this.container.find("#renderer-container"))):(this.element.layout++,this.set_layout());break;case 4:this.editor.coder.typelist.length>2&&null!==this.editor.ifr.ifr?(this.container.find("#renderer-container").children().eq(2).insertAfter(this.container.find("#code-editor .CodeMirror").eq(1)),this.container.find("#renderer-container").children().eq(1).insertAfter(this.container.find("#code-editor .CodeMirror").eq(1)),this.container.find(".renderer").css({height:"100%"})):2===this.editor.coder.typelist.length?(this.outerheight=(this.outerheight+35)/2,this.container.find(".CodeMirror").show().css("height",""+this.outerheight)):1===this.editor.coder.typelist.length?(this.outerheight=2*this.outerheight,this.container.find(".CodeMirror").show().css("height",""+this.outerheight)):(this.element.layout++,this.set_layout());break;default:this.container.find("#mode-tabs").show().addClass("tabdown"),this.outerheight=this.container.find("#code-editor").height(),this.container.find(".CodeMirror").css("height",""+this.outerheight),this.container.find(".CodeMirror").eq(2).css({top:"0"}),this.element.layout=1,this.set_layout()}},a.prototype.enter_fullscreen=function(){console.log(this.element.origin),d("enter_fullscreen",this.element.origin)},a.prototype.exit_fullscreen=function(){d("exit_fullscreen",this.element.origin)},a.prototype.event_bind=function(){var a;return a=this,this.container.find("#toggle-full-screen").click(function(){return $(this).hasClass("full-screen-enabled")?a.exit_fullscreen():a.enter_fullscreen(),$(this).toggleClass("full-screen-enabled")}),this.container.find(".iframeread").click(function(){return $(this).hasClass("active")?a.container.find(".coderead").hasClass("active")?($(this).removeClass("active"),a.container.find(".codepanel").removeClass("expansionleft narrowleft").addClass("narrow"),a.container.find(".renderpanel").removeClass("narrowleft expansionleft").addClass("expansion")):(a.container.find(".coderead").click(),setTimeout(function(){return a.container.find(".iframeread").click()},500)):($(this).addClass("active"),a.container.find(".codepanel").removeClass("narrow").addClass("expansionleft"),a.container.find(".renderpanel").removeClass("expansion").addClass("narrowleft"))}),this.container.find(".coderead").on("click",function(){return $(this).hasClass("active")?a.container.find(".iframeread").hasClass("active")?($(this).removeClass("active"),a.container.find(".renderpanel").removeClass("expansionleft narrowleft").addClass("narrow"),a.container.find(".codepanel").removeClass("narrowleft expansionleft").addClass("expansion")):(a.container.find(".iframeread").click(),setTimeout(function(){return a.container.find(".coderead").click()},500)):($(this).addClass("active"),a.container.find(".renderpanel").removeClass("narrow").addClass("expansionleft"),a.container.find(".codepanel").removeClass("expansion").addClass("narrowleft"))}),this.container.find(".setting").on("click",function(){return $(this).toggleClass("active"),a.container.find("#setting-panel").animate({left:$(this).hasClass("active")?"-50%":"0%"},500)})},a}(),b.exports=c});